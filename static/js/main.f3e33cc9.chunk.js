(this["webpackJsonpgame-reviews"]=this["webpackJsonpgame-reviews"]||[]).push([[0],{53:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(21),o=n.n(r),a=n(3),i=n(4),u=n(6),l=n(5),j=(n(9),n(0)),d=function(e){return Object(j.jsxs)("header",{children:[Object(j.jsx)("h1",{className:"title",children:"Game Reviews"}),Object(j.jsxs)("div",{className:"login",children:[Object(j.jsxs)("p",{children:["Logged in as : ",e.user.username]}),!0===e.user.isLoggedIn?Object(j.jsx)("button",{onClick:e.logout,className:"button",children:"Logout"}):Object(j.jsx)("button",{onClick:e.logout,className:"button",children:"LogIn"})]}),Object(j.jsx)("h3",{children:"Category"})]})},h=n(8),m=n.n(h),b=function(){return m.a.get("https://game-reviews-ayakobland.herokuapp.com/api/categories").then((function(e){return e.data}))},p=function(e,t,n,s){return console.log(e,t,n),m.a.get("https://game-reviews-ayakobland.herokuapp.com/api/reviews",{params:{category:e,sort_by:t,order:n,owner:s}}).then((function(e){return e.data}))},v=function(e){return m.a.get("https://game-reviews-ayakobland.herokuapp.com/api/reviews/".concat(e)).then((function(e){return e.data}))},O=function(e){return m.a.get("https://game-reviews-ayakobland.herokuapp.com/api/reviews/".concat(e,"/comments")).then((function(e){return e.data})).catch((function(e){return console.dir(e)}))},g=function(e,t,n){return"singleReview"===n?m.a.patch("https://game-reviews-ayakobland.herokuapp.com/api/reviews/".concat(t),{inc_votes:e}).then(console.log("success")).catch((function(e){return e})):"comments"===n?m.a.patch("https://game-reviews-ayakobland.herokuapp.com/api/comments/".concat(t),{inc_votes:e}).then(console.log("success")).catch((function(e){return e})):void 0},f=function(e,t,n){return console.log(e,t,n),m.a.post("https://game-reviews-ayakobland.herokuapp.com/api/reviews/".concat(e,"/comments"),{username:n,body:t}).then((function(e){return e.data})).catch((function(e){return console.dir(e)}))},w=function(e){return m.a.delete("https://game-reviews-ayakobland.herokuapp.com/api/comments/".concat(e)).then((function(){return console.log("success")}))},x=n(7),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={categories:[]},e.componentDidMount=function(){b().then((function(t){var n=t.categories;return e.setState({categories:n})}))},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsx)("nav",{className:"navbar",children:this.state.categories.map((function(e){return Object(j.jsx)(x.a,{to:"/reviews/".concat(e.slug),children:e.slug},e.slug)}))})}}]),n}(s.Component);var _=function(e){return Object(j.jsxs)("section",{className:"sortbuttons",children:["Sort_by:",Object(j.jsx)("button",{className:"button",onClick:function(){e.sort_by("created_at")},children:"Date"}),Object(j.jsx)("button",{className:"button",onClick:function(){e.sort_by("comment_count")},children:"Comment count"}),Object(j.jsx)("button",{className:"button",onClick:e.order,children:"Change order : \u2b06\ufe0f\u2b07\ufe0f"})]})},C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={reviews:[],category:"",sort_by:"",order:"desc",owner:"",isLoading:!0},e.componentDidMount=function(){p(e.props.category).then((function(t){var n=t.reviews;return e.setState({reviews:n,isLoading:!1})}))},e.componentDidUpdate=function(t,n){e.props.category===t.category&&e.state.sort_by===n.sort_by&&e.state.order===n.order&&e.state.owner===n.owner||p(e.props.category,e.state.sort_by,e.state.order,e.state.owner).then((function(t){var n=t.reviews;return e.setState({reviews:n})}))},e.sort_by=function(t){e.setState({sort_by:t})},e.order=function(){"desc"===e.state.order&&e.setState({order:"asc"}),"asc"===e.state.order&&e.setState({order:"desc"})},e.owner=function(t){e.setState({owner:t})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.state),this.state.isLoading?Object(j.jsxs)("div",{className:"lds-ring",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]}):this.state.reviews.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(_,{sort_by:this.sort_by,order:this.order}),this.state.reviews.map((function(t){return Object(j.jsxs)("li",{className:"review",children:[Object(j.jsx)(x.a,{to:"/",children:Object(j.jsx)("button",{className:"button",children:"Go Back to the Whole List"})}),Object(j.jsxs)(x.a,{to:"/reviews/single_review/".concat(t.review_id),children:[Object(j.jsxs)("p",{children:["Category: ",t.category]}),Object(j.jsx)("p",{children:"Title : "+t.title}),Object(j.jsx)("p",{children:t.review_body})]}),Object(j.jsxs)("p",{children:[t.comment_count," comments"]}),Object(j.jsxs)("p",{children:["Poseted by : ",Object(j.jsx)("button",{onClick:function(){e.owner(t.owner)},className:"button",children:t.owner})]}),Object(j.jsxs)("p",{children:["Date : ",t.created_at.slice(0,10)]})]},t.review_id)}))]}):Object(j.jsx)("p",{children:"Sorry, No Reviews Found"})}}]),n}(s.Component),k=n(23),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={votes:0},e.handleClick=function(t){e.setState((function(e){return{votes:e.votes+t}})),g(t,e.props.id,e.props.from)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"vote_button",children:[Object(j.jsx)("button",{disabled:1===this.state.votes,onClick:function(){e.handleClick(1)},className:"button",children:"\u2764\ufe0f"}),Object(j.jsxs)("p",{children:["Votes: ",this.props.votes+this.state.votes]}),Object(j.jsx)("button",{disabled:-1===this.state.votes,onClick:function(){e.handleClick(-1)},className:"button",children:"\ud83d\udc99"})]})}}]),n}(s.Component),S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={comments:[],newComment:"",deleteMessage:""},e.componentDidMount=function(){O(e.props.review_id).then((function(t){var n=t.comments;return e.setState({comments:n})})).catch((function(e){return console.log(e)}))},e.componentDidUpdate=function(t,n){e.state.deleteMessage!==n.deleteMessage&&O(e.props.review_id).then((function(t){var n=t.comments;return e.setState({comments:n,deleteMessage:""})}))},e.commentSubmit=function(t){t.preventDefault(),f(e.props.review_id,e.state.newComment,e.props.user.username).then((function(t){return e.setState({comments:[t.comment].concat(Object(k.a)(e.state.comments)),newComment:""})}))},e.deleteComment=function(t){w(t),e.setState({deleteMessage:"Comment deleted."})},e.handleChange=function(t){e.setState({newComment:t.target.value})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.comments;return console.log(this.state.newComment),this.state.comments.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{onSubmit:this.commentSubmit,children:[Object(j.jsxs)("label",{children:[" Leave your comment:",Object(j.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.newComment})]}),Object(j.jsx)("button",{type:"submit",className:"button",disabled:!this.state.newComment,children:"Submit"})]}),t.map((function(t){return Object(j.jsxs)("li",{className:"comment",children:[Object(j.jsxs)("p",{children:["Author: ",t.author]}),Object(j.jsxs)("p",{children:["Comment ID: ",t.comment_id]}),Object(j.jsx)("p",{children:t.body}),Object(j.jsx)(N,{votes:t.votes,id:t.comment_id,from:"comments"}),"\b",Object(j.jsxs)("p",{children:["Posted at: ",t.created_at.slice(0,10)]}),Object(j.jsx)("button",{onClick:function(){return e.deleteComment(t.comment_id)},disabled:t.author!==e.props.user.username,className:"button",children:"Delete"})]},t.comment_id)}))]}):Object(j.jsx)("p",{children:"Sorry, No Comments Found"})}}]),n}(s.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={review:{}},e.componentDidMount=function(){v(e.props.review_id).then((function(t){var n=t.review;return e.setState({review:n})}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.review;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{className:"singleReview",children:[Object(j.jsx)(x.a,{to:"/",children:Object(j.jsx)("button",{className:"button",children:"Go Back to the Whole List"})}),Object(j.jsxs)("p",{children:["Category: ",e.category," "]}),Object(j.jsxs)("p",{children:["Designer : ",e.designer]}),Object(j.jsxs)("p",{children:["Title : ",e.title]}),Object(j.jsxs)("p",{children:["Review : ",e.review_body]}),Object(j.jsx)(N,{votes:e.votes,id:e.review_id,from:"singleReview"}),Object(j.jsxs)("p",{children:[e.comment_count," comments"]}),Object(j.jsx)("p",{children:Object(j.jsx)("img",{src:e.review_img_url,className:"img"})})]}),Object(j.jsx)("h2",{children:"Comments"}),Object(j.jsx)(S,{review_id:this.props.review_id,user:this.props.user})]})}}]),n}(s.Component),D=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Sorry, No Page Found."}),Object(j.jsx)(x.a,{to:"/",children:"Go to the main page"})]})},M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={username:"jessjelly",isLoggedIn:!0},e.logout=function(){"jessjelly"===e.state.username&&e.setState({username:"",isLoggedIn:!1}),""===e.state.username&&e.setState({username:"jessjelly",isLoggedIn:!0})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(d,{user:this.state,logout:this.logout}),Object(j.jsx)(y,{}),Object(j.jsxs)(x.b,{className:"reviewsList",children:[Object(j.jsx)(D,{default:!0}),Object(j.jsx)(C,{path:"/"}),Object(j.jsx)(C,{path:"/reviews"}),Object(j.jsx)(C,{path:"/reviews/:category"}),Object(j.jsx)(L,{path:"/reviews/single_review/:review_id",user:this.state})]})]})}}]),n}(s.Component);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(M,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.f3e33cc9.chunk.js.map